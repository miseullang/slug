---
title: "테스트 포스트 1"
date: "2025-11-21"
tags:
  - Test
  - MDX
summary: "로컬에서 렌더링과 라우팅을 테스트하기 위한 예시 포스트"
---

회사에서는 yarn, 개인 프로젝트는 pnpm을 쓰면서 실수로 패키지 매니저를 크로스 사용해서 오류가 나기도 하고, pnpm의 경우 특정 환경에서 에러가 나기도 하면서 패키지 매니저 간의 패키지 관리 방법에 대해 궁금해져 찾아봤던 내용을 정리해보려고 한다.

npm, yarn, yarn berry, pnpm은 모두 **Node.js 패키지 매니저**이지만, 각기 등장한 이유와 내부 동작 방식, 철학이 다르다.
각 패키지 매니저의 등장 배경과 핵심적인 차이점을 중심으로 비교해보면서 어떤 패키지 매니저를 쓰면 좋을지 생각해보려고 한다.

## **1. npm (Node Package Manager)**

---

### **등장 배경**

**Node.js의 기본 패키지 매니저**로, 2010년대 초반 Node가 처음 등장할 때 함께 만들어졌다.

개발자들이 외부 라이브러리를 쉽게 설치하고, 의존성을 관리하는데 사용하도록 설계됐다.

### **특징**

- package.json 파일로 의존성 관리
- node_modules에 모든 패키지와 하위 의존성을 **트리 구조로 중복 설치**
- Node.js 설치 시 자동 포함

### **한계**

- 느린 설치 속도 (특히 node_modules 트리 구조 때문)
- 버전 충돌 문제 (dependency hell)
- 패키지 잠금(lock) 파일 도입이 늦었음 (package-lock.json은 npm 5부터)

## **2. Yarn (Classic, aka Yarn v1)**

---

### **등장 배경**

**Facebook**이 2016년에 npm의 속도·안정성 문제를 해결하기 위해 개발.

대규모 프로젝트에서 npm의 불안정한 의존성 관리가 큰 문제였어요.

### **특징**

- **병렬 설치**로 npm보다 훨씬 빠름.
- **yarn.lock** 파일로 의존성 버전을 **고정**해 재현성 보장.
- **오프라인 캐싱** 지원.
- npm install 대신 yarn install.

### **장점 요약**

- 빠름
- 안정적
- 일관성 있음

## **3. Yarn Berry (aka Yarn 2+)**

---

### **등장 배경**

- Yarn v1이 npm과 거의 비슷한 구조를 가지면서 기술적 한계에 부딪힘.
  예: node_modules가 너무 무겁고 느리며, 워크스페이스 관리에 제약이 많음.
- 그래서 Yarn 팀은 **완전히 새로운 구조로 재설계**.

### **핵심 변화**

- **Plug’n’Play (PnP)** 시스템 도입
  -> node_modules 폴더를 없애고, .pnp.cjs 파일에서 **가상 파일 시스템 기반으로 의존성 관리**.
  -> 훨씬 빠른 런타임 해석 및 작은 디스크 사용량.
- **Zero-Install** 가능 (의존성 캐시를 git에 포함 가능)
- **Workspaces 개선** → 모노레포 환경에서 훨씬 효율적.
- **빌드 툴 통합** (예: constraints, yarn plugin system)

### **단점**

- 기존 툴과의 호환성 문제 많음 (특히 node_modules 전제한 툴들)
- 설정 난이도 높음

## **4. pnpm (Performant npm)**

---

### **등장 배경**

- 2017년에 **npm의 중복 설치 문제를 해결**하기 위해 만들어짐.
- node_modules를 완전히 제거하진 않지만, **디스크 효율성과 속도를 극대화**하려는 목표.

### **핵심 설계**

- **Content-addressable store** 사용
  → 모든 패키지를 전역 스토어(캐시)에 한 번만 설치.
  → 다른 프로젝트에서 같은 패키지를 쓰면, **하드링크로 연결**해 중복 저장 방지.
- node_modules는 여전히 존재하지만, 실제 파일이 아니라 **링크 구조**.
- 의존성 중복 최소화 + 빠른 설치 + 높은 호환성.

### **장점**

- 디스크 절약
- 매우 빠름
- Yarn Berry보다 호환성 좋음

## 요약 및 정리

---

### 표로 한눈에 비교하기

| **항목**     | **npm**            | **Yarn (v1)**        | **Yarn Berry (v2+)** | **pnpm**             |
| ------------ | ------------------ | -------------------- | -------------------- | -------------------- |
| 등장 시기    | ~2010              | 2016                 | 2020                 | 2017                 |
| 주요 목적    | 기본 패키지 매니저 | npm 속도/안정성 개선 | 구조적 혁신 (PnP)    | 빠르고 효율적인 설치 |
| 속도         | 느림               | 빠름                 | 매우 빠름            | 매우 빠름            |
| node_modules | 있음 (트리형 중복) | 있음                 | ❌ (PnP)             | 있음 (하드링크 구조) |
| 디스크 효율  | 낮음               | 중간                 | 매우 높음            | 매우 높음            |
| 호환성       | 높음               | 높음                 | 낮음                 | 높음                 |
| 대표 특징    | 기본/보편적        | 안정적/일관성        | 미래지향적/PnP       | 효율적/실용적        |

### ➡️ **정리**

- **npm** → Node.js의 기본, 하지만 느리고 비효율적이었음.
- **Yarn (v1)** → npm의 속도와 안정성 문제 해결.
- **Yarn Berry (v2+)** → 패키지 관리 패러다임 자체를 바꾼 혁신적인 버전.
- **pnpm** → Yarn Berry의 성능과 npm의 호환성을 결합한 “실용적 대안”.
