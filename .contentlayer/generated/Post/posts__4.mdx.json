{
  "title": "짧지만 거슬리던 렌더링 지연, in-flight Promise로 해결해보기",
  "date": "2025-12-22T00:00:00.000Z",
  "tags": [
    "프론트엔드",
    "업무 일지"
  ],
  "summary": "테이블의 각 셀이 서로 다른 API 호출 깊이를 가지면서 발생한 미묘한 렌더링 타이밍 차이를, in-flight Promise(요청 중 캐시) 패턴으로 해결한 경험을 정리합니다.",
  "body": {
    "raw": "\n최근에 데이터를 테이블 형태로 렌더링 해야하는 업무가 있었다.\n기존의 API를 가지고 빠르게 개발해야 했던 상황이라 불가피하게 API를 연쇄적으로 호출할 수 밖에 없었다.\n6개의 셀이 있는데 모두 API 호출 깊이가 다르다보니 시각적으로 렌더링 속도 차이가 느껴졌다. 스켈레톤을 보여주기에는 짧은 텀이지만, 시각적으로는 거슬리는 애매한 타이밍이라 렌더링 속도 자체를 개선할 수 있는 근본적인 방법을 찾고 싶었다.\n결과적으로 in-flight Promise(요청 중 캐시) 방식을 적용해서 격차를 해소해봤는데 그 과정을 소개하려고 한다.\nAPI 호출 흐름은 다음과 같다.\n\n1. A 리스트 조회\n   1. 각 row별 A key로 B조회\n      1. B의 response로 (1), (2)번 셀 렌더링\n      2. B의 response의 C key로 C 호출\n      3. C의 D key로 D 조회 후 (3)번 셀 렌더링\n   2. 각 row의 E key로 E 조회 후 (4), (5) 렌더링\n\n## 첫 번째 시도\n\n---\n\n1번의 A 리스트로 불러온 response에서 다음 체이닝을 위한 2개의 key를 받기 때문에 해당 key를 각각 캐싱하고, 캐싱된 key가 없는 경우에만 API를 호출하도록 했다.\n\n이렇게 적용 후 API 호출을 했을 때, 예상보다 호출 빈도가 잦은 것을 발견했다.\n\n<Callout>\n**단순 캐싱의 호출 과정**\n\n---\n\nt0: A 리스트 응답 도착\n→ row별 key 추출 완료\n\nt1: 셀 (1) 렌더 → fetchB\n→ cache에 없음 → API 요청 시작\n\nt1: 셀 (2) 렌더 → fetchB\n→ cache에 없음 (아직 응답 안 옴) → API 요청 시작 ❌ 중복\n\nt2: 첫 번째 B 응답 도착 → cache 저장\nt3: 두 번째 B 응답 도착 → cache 덮어씀\n\n</Callout>\n\n1번 호출에 대한 응답값을 가지고 a,b가 각각 체이닝과 렌더링을 하는 구조이지만, 각 row마다 같은 B / C / D / E key가 여러 셀에서 동시에 필요로 하기 때문에 단순히 캐시 존재 여부만으로 판단하면 중복 호출이 발생하게 된다.\n\n캐싱 전 중복 호출까지 완전히 막기 위해 in-flight Promise 캐시(요청 중 캐시)를 추가했다.\n\n## 보완\n\n---\n\n자바스크립트의 fetch는 Promise 객체를 반환한다.\n\nPromise 객체는 외부에 데이터를 요청하고 받는 시간동안 다음 작업을 처리할 수 있도록 하는 비동기 객체이다.\n\n실제로는 값을 가지고 있지 않아도 마치 값이 있는 것처럼 사용할 수 있기 때문에 이 점을 이용해서 요청 중인 API 중복 호출하지 않도록 막아줄 수 있다.\n\n### 보완된 흐름\n\n1. 요청 발생\n2. 캐시에 있으면 캐시 반환\n3. 캐시에 없으면 inflight 확인 → 있으면 그 Promise 반환\n4. 없으면 새 요청 생성, inflight에 등록\n5. 응답 오면 캐시에 저장, inflight에서 제거\n\n### 최종 적용한 코드\n\n```tsx\nconst cache = new Map<string, Data>();\nconst pending = new Map<string, Promise<Data>>();\n\nexport const fetchData = async (key: string, signal?: AbortSignal) => {\n  const cached = cache.get(key);\n  if (cached) return cached;\n\n  const inflight = pending.get(key);\n  if (inflight) return inflight;\n\n  const request = (async () => {\n    const res = await api.get(`/endpoint/${key}`, { signal });\n    const data = res.data;\n    cache.set(key, data);\n    return data;\n  })();\n\n  pending.set(key, request);\n  try {\n    return await request;\n  } finally {\n    pending.delete(key);\n  }\n};\n```\n\n이렇게 중복 요청까지 방지한 후, 테이블의 모든 셀이 비슷한 시간 내에 렌더링되는 것을 확인할 수 있었고, 개발자 도구로 확인했을 때 API 중복 요청이 사라진 것도 확인할 수 있었다.\n",
    "code": "var Component=(()=>{var oe=Object.create;var f=Object.defineProperty;var se=Object.getOwnPropertyDescriptor;var le=Object.getOwnPropertyNames;var ce=Object.getPrototypeOf,ue=Object.prototype.hasOwnProperty;var x=(o,n)=>()=>(n||o((n={exports:{}}).exports,n),n.exports),ie=(o,n)=>{for(var c in n)f(o,c,{get:n[c],enumerable:!0})},w=(o,n,c,m)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let i of le(n))!ue.call(o,i)&&i!==c&&f(o,i,{get:()=>n[i],enumerable:!(m=se(n,i))||m.enumerable});return o};var be=(o,n,c)=>(c=o!=null?oe(ce(o)):{},w(n||!o||!o.__esModule?f(c,\"default\",{value:o,enumerable:!0}):c,o)),de=o=>w(f({},\"__esModule\",{value:!0}),o);var S=x((he,O)=>{O.exports=React});var C=x(g=>{\"use strict\";(function(){function o(e){if(e==null)return null;if(typeof e==\"function\")return e.$$typeof===J?null:e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case _:return\"Fragment\";case q:return\"Profiler\";case B:return\"StrictMode\";case K:return\"Suspense\";case H:return\"SuspenseList\";case Q:return\"Activity\"}if(typeof e==\"object\")switch(typeof e.tag==\"number\"&&console.error(\"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"),e.$$typeof){case W:return\"Portal\";case X:return e.displayName||\"Context\";case z:return(e._context.displayName||\"Context\")+\".Consumer\";case G:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||\"\",e=e!==\"\"?\"ForwardRef(\"+e+\")\":\"ForwardRef\"),e;case Z:return t=e.displayName||null,t!==null?t:o(e.type)||\"Memo\";case p:t=e._payload,e=e._init;try{return o(e(t))}catch{}}return null}function n(e){return\"\"+e}function c(e){try{n(e);var t=!1}catch{t=!0}if(t){t=console;var s=t.error,u=typeof Symbol==\"function\"&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||\"Object\";return s.call(t,\"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",u),n(e)}}function m(e){if(e===_)return\"<>\";if(typeof e==\"object\"&&e!==null&&e.$$typeof===p)return\"<...>\";try{var t=o(e);return t?\"<\"+t+\">\":\"<...>\"}catch{return\"<...>\"}}function i(){var e=U.A;return e===null?null:e.getOwner()}function y(){return Error(\"react-stack-top-frame\")}function M(e){if(P.call(e,\"key\")){var t=Object.getOwnPropertyDescriptor(e,\"key\").get;if(t&&t.isReactWarning)return!1}return e.key!==void 0}function F(e,t){function s(){T||(T=!0,console.error(\"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",t))}s.isReactWarning=!0,Object.defineProperty(e,\"key\",{get:s,configurable:!0})}function $(){var e=o(this.type);return R[e]||(R[e]=!0,console.error(\"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\")),e=this.props.ref,e!==void 0?e:null}function L(e,t,s,u,b,N){var l=s.ref;return e={$$typeof:E,type:e,key:t,props:s,_owner:u},(l!==void 0?l:null)!==null?Object.defineProperty(e,\"ref\",{enumerable:!1,get:$}):Object.defineProperty(e,\"ref\",{enumerable:!1,value:null}),e._store={},Object.defineProperty(e._store,\"validated\",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(e,\"_debugInfo\",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(e,\"_debugStack\",{configurable:!1,enumerable:!1,writable:!0,value:b}),Object.defineProperty(e,\"_debugTask\",{configurable:!1,enumerable:!1,writable:!0,value:N}),Object.freeze&&(Object.freeze(e.props),Object.freeze(e)),e}function V(e,t,s,u,b,N){var l=t.children;if(l!==void 0)if(u)if(ee(l)){for(u=0;u<l.length;u++)k(l[u]);Object.freeze&&Object.freeze(l)}else console.error(\"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\");else k(l);if(P.call(t,\"key\")){l=o(e);var d=Object.keys(t).filter(function(te){return te!==\"key\"});u=0<d.length?\"{key: someKey, \"+d.join(\": ..., \")+\": ...}\":\"{key: someKey}\",v[l+u]||(d=0<d.length?\"{\"+d.join(\": ..., \")+\": ...}\":\"{}\",console.error(`A props object containing a \"key\" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />`,u,l,d,l),v[l+u]=!0)}if(l=null,s!==void 0&&(c(s),l=\"\"+s),M(t)&&(c(t.key),l=\"\"+t.key),\"key\"in t){s={};for(var h in t)h!==\"key\"&&(s[h]=t[h])}else s=t;return l&&F(s,typeof e==\"function\"?e.displayName||e.name||\"Unknown\":e),L(e,l,s,i(),b,N)}function k(e){j(e)?e._store&&(e._store.validated=1):typeof e==\"object\"&&e!==null&&e.$$typeof===p&&(e._payload.status===\"fulfilled\"?j(e._payload.value)&&e._payload.value._store&&(e._payload.value._store.validated=1):e._store&&(e._store.validated=1))}function j(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===E}var a=S(),E=Symbol.for(\"react.transitional.element\"),W=Symbol.for(\"react.portal\"),_=Symbol.for(\"react.fragment\"),B=Symbol.for(\"react.strict_mode\"),q=Symbol.for(\"react.profiler\"),z=Symbol.for(\"react.consumer\"),X=Symbol.for(\"react.context\"),G=Symbol.for(\"react.forward_ref\"),K=Symbol.for(\"react.suspense\"),H=Symbol.for(\"react.suspense_list\"),Z=Symbol.for(\"react.memo\"),p=Symbol.for(\"react.lazy\"),Q=Symbol.for(\"react.activity\"),J=Symbol.for(\"react.client.reference\"),U=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=Object.prototype.hasOwnProperty,ee=Array.isArray,A=console.createTask?console.createTask:function(){return null};a={react_stack_bottom_frame:function(e){return e()}};var T,R={},ne=a.react_stack_bottom_frame.bind(a,y)(),re=A(m(y)),v={};g.Fragment=_,g.jsxDEV=function(e,t,s,u){var b=1e4>U.recentlyCreatedOwnerStacks++;return V(e,t,s,u,b?Error(\"react-stack-top-frame\"):ne,b?A(m(e)):re)}})()});var D=x((ge,I)=>{\"use strict\";I.exports=C()});var pe={};ie(pe,{default:()=>fe,frontmatter:()=>me});var r=be(D()),me={title:\"\\uC9E7\\uC9C0\\uB9CC \\uAC70\\uC2AC\\uB9AC\\uB358 \\uB80C\\uB354\\uB9C1 \\uC9C0\\uC5F0, in-flight Promise\\uB85C \\uD574\\uACB0\\uD574\\uBCF4\\uAE30\",date:\"2025-12-22\",tags:[\"\\uD504\\uB860\\uD2B8\\uC5D4\\uB4DC\",\"\\uC5C5\\uBB34 \\uC77C\\uC9C0\"],summary:\"\\uD14C\\uC774\\uBE14\\uC758 \\uAC01 \\uC140\\uC774 \\uC11C\\uB85C \\uB2E4\\uB978 API \\uD638\\uCD9C \\uAE4A\\uC774\\uB97C \\uAC00\\uC9C0\\uBA74\\uC11C \\uBC1C\\uC0DD\\uD55C \\uBBF8\\uBB18\\uD55C \\uB80C\\uB354\\uB9C1 \\uD0C0\\uC774\\uBC0D \\uCC28\\uC774\\uB97C, in-flight Promise(\\uC694\\uCCAD \\uC911 \\uCE90\\uC2DC) \\uD328\\uD134\\uC73C\\uB85C \\uD574\\uACB0\\uD55C \\uACBD\\uD5D8\\uC744 \\uC815\\uB9AC\\uD569\\uB2C8\\uB2E4.\"};function Y(o){let n=Object.assign({p:\"p\",br:\"br\",ol:\"ol\",li:\"li\",h2:\"h2\",hr:\"hr\",strong:\"strong\",h3:\"h3\",pre:\"pre\",code:\"code\"},o.components),{Callout:c}=n;return c||_e(\"Callout\",!0,\"31:1-48:11\"),(0,r.jsxDEV)(r.Fragment,{children:[(0,r.jsxDEV)(n.p,{children:[\"\\uCD5C\\uADFC\\uC5D0 \\uB370\\uC774\\uD130\\uB97C \\uD14C\\uC774\\uBE14 \\uD615\\uD0DC\\uB85C \\uB80C\\uB354\\uB9C1 \\uD574\\uC57C\\uD558\\uB294 \\uC5C5\\uBB34\\uAC00 \\uC788\\uC5C8\\uB2E4.\",(0,r.jsxDEV)(n.br,{},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\"},this),`\n`,\"\\uAE30\\uC874\\uC758 API\\uB97C \\uAC00\\uC9C0\\uACE0 \\uBE60\\uB974\\uAC8C \\uAC1C\\uBC1C\\uD574\\uC57C \\uD588\\uB358 \\uC0C1\\uD669\\uC774\\uB77C \\uBD88\\uAC00\\uD53C\\uD558\\uAC8C API\\uB97C \\uC5F0\\uC1C4\\uC801\\uC73C\\uB85C \\uD638\\uCD9C\\uD560 \\uC218 \\uBC16\\uC5D0 \\uC5C6\\uC5C8\\uB2E4.\",(0,r.jsxDEV)(n.br,{},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\"},this),`\n`,\"6\\uAC1C\\uC758 \\uC140\\uC774 \\uC788\\uB294\\uB370 \\uBAA8\\uB450 API \\uD638\\uCD9C \\uAE4A\\uC774\\uAC00 \\uB2E4\\uB974\\uB2E4\\uBCF4\\uB2C8 \\uC2DC\\uAC01\\uC801\\uC73C\\uB85C \\uB80C\\uB354\\uB9C1 \\uC18D\\uB3C4 \\uCC28\\uC774\\uAC00 \\uB290\\uAEF4\\uC84C\\uB2E4. \\uC2A4\\uCF08\\uB808\\uD1A4\\uC744 \\uBCF4\\uC5EC\\uC8FC\\uAE30\\uC5D0\\uB294 \\uC9E7\\uC740 \\uD140\\uC774\\uC9C0\\uB9CC, \\uC2DC\\uAC01\\uC801\\uC73C\\uB85C\\uB294 \\uAC70\\uC2AC\\uB9AC\\uB294 \\uC560\\uB9E4\\uD55C \\uD0C0\\uC774\\uBC0D\\uC774\\uB77C \\uB80C\\uB354\\uB9C1 \\uC18D\\uB3C4 \\uC790\\uCCB4\\uB97C \\uAC1C\\uC120\\uD560 \\uC218 \\uC788\\uB294 \\uADFC\\uBCF8\\uC801\\uC778 \\uBC29\\uBC95\\uC744 \\uCC3E\\uACE0 \\uC2F6\\uC5C8\\uB2E4.\",(0,r.jsxDEV)(n.br,{},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\"},this),`\n`,\"\\uACB0\\uACFC\\uC801\\uC73C\\uB85C in-flight Promise(\\uC694\\uCCAD \\uC911 \\uCE90\\uC2DC) \\uBC29\\uC2DD\\uC744 \\uC801\\uC6A9\\uD574\\uC11C \\uACA9\\uCC28\\uB97C \\uD574\\uC18C\\uD574\\uBD24\\uB294\\uB370 \\uADF8 \\uACFC\\uC815\\uC744 \\uC18C\\uAC1C\\uD558\\uB824\\uACE0 \\uD55C\\uB2E4.\",(0,r.jsxDEV)(n.br,{},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\"},this),`\n`,\"API \\uD638\\uCD9C \\uD750\\uB984\\uC740 \\uB2E4\\uC74C\\uACFC \\uAC19\\uB2E4.\"]},void 0,!0,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:10,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.ol,{children:[`\n`,(0,r.jsxDEV)(n.li,{children:[\"A \\uB9AC\\uC2A4\\uD2B8 \\uC870\\uD68C\",`\n`,(0,r.jsxDEV)(n.ol,{children:[`\n`,(0,r.jsxDEV)(n.li,{children:[\"\\uAC01 row\\uBCC4 A key\\uB85C B\\uC870\\uD68C\",`\n`,(0,r.jsxDEV)(n.ol,{children:[`\n`,(0,r.jsxDEV)(n.li,{children:\"B\\uC758 response\\uB85C (1), (2)\\uBC88 \\uC140 \\uB80C\\uB354\\uB9C1\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:18,columnNumber:7},this),`\n`,(0,r.jsxDEV)(n.li,{children:\"B\\uC758 response\\uC758 C key\\uB85C C \\uD638\\uCD9C\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:19,columnNumber:7},this),`\n`,(0,r.jsxDEV)(n.li,{children:\"C\\uC758 D key\\uB85C D \\uC870\\uD68C \\uD6C4 (3)\\uBC88 \\uC140 \\uB80C\\uB354\\uB9C1\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:20,columnNumber:7},this),`\n`]},void 0,!0,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:18,columnNumber:7},this),`\n`]},void 0,!0,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:17,columnNumber:4},this),`\n`,(0,r.jsxDEV)(n.li,{children:\"\\uAC01 row\\uC758 E key\\uB85C E \\uC870\\uD68C \\uD6C4 (4), (5) \\uB80C\\uB354\\uB9C1\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:21,columnNumber:4},this),`\n`]},void 0,!0,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:17,columnNumber:4},this),`\n`]},void 0,!0,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:16,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:16,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.h2,{id:\"\\uCCAB-\\uBC88\\uC9F8-\\uC2DC\\uB3C4\",children:\"\\uCCAB \\uBC88\\uC9F8 \\uC2DC\\uB3C4\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:23,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.hr,{},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:25,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:\"1\\uBC88\\uC758 A \\uB9AC\\uC2A4\\uD2B8\\uB85C \\uBD88\\uB7EC\\uC628 response\\uC5D0\\uC11C \\uB2E4\\uC74C \\uCCB4\\uC774\\uB2DD\\uC744 \\uC704\\uD55C 2\\uAC1C\\uC758 key\\uB97C \\uBC1B\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uD574\\uB2F9 key\\uB97C \\uAC01\\uAC01 \\uCE90\\uC2F1\\uD558\\uACE0, \\uCE90\\uC2F1\\uB41C key\\uAC00 \\uC5C6\\uB294 \\uACBD\\uC6B0\\uC5D0\\uB9CC API\\uB97C \\uD638\\uCD9C\\uD558\\uB3C4\\uB85D \\uD588\\uB2E4.\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:27,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:\"\\uC774\\uB807\\uAC8C \\uC801\\uC6A9 \\uD6C4 API \\uD638\\uCD9C\\uC744 \\uD588\\uC744 \\uB54C, \\uC608\\uC0C1\\uBCF4\\uB2E4 \\uD638\\uCD9C \\uBE48\\uB3C4\\uAC00 \\uC7A6\\uC740 \\uAC83\\uC744 \\uBC1C\\uACAC\\uD588\\uB2E4.\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:29,columnNumber:1},this),`\n`,(0,r.jsxDEV)(c,{children:[(0,r.jsxDEV)(n.p,{children:(0,r.jsxDEV)(n.strong,{children:\"\\uB2E8\\uC21C \\uCE90\\uC2F1\\uC758 \\uD638\\uCD9C \\uACFC\\uC815\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:32,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:32,columnNumber:1},this),(0,r.jsxDEV)(n.hr,{},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:34,columnNumber:1},this),(0,r.jsxDEV)(n.p,{children:[\"t0: A \\uB9AC\\uC2A4\\uD2B8 \\uC751\\uB2F5 \\uB3C4\\uCC29\",(0,r.jsxDEV)(n.br,{},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\"},this),`\n`,\"\\u2192 row\\uBCC4 key \\uCD94\\uCD9C \\uC644\\uB8CC\"]},void 0,!0,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:36,columnNumber:1},this),(0,r.jsxDEV)(n.p,{children:[\"t1: \\uC140 (1) \\uB80C\\uB354 \\u2192 fetchB\",(0,r.jsxDEV)(n.br,{},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\"},this),`\n`,\"\\u2192 cache\\uC5D0 \\uC5C6\\uC74C \\u2192 API \\uC694\\uCCAD \\uC2DC\\uC791\"]},void 0,!0,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:39,columnNumber:1},this),(0,r.jsxDEV)(n.p,{children:[\"t1: \\uC140 (2) \\uB80C\\uB354 \\u2192 fetchB\",(0,r.jsxDEV)(n.br,{},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\"},this),`\n`,\"\\u2192 cache\\uC5D0 \\uC5C6\\uC74C (\\uC544\\uC9C1 \\uC751\\uB2F5 \\uC548 \\uC634) \\u2192 API \\uC694\\uCCAD \\uC2DC\\uC791 \\u274C \\uC911\\uBCF5\"]},void 0,!0,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:42,columnNumber:1},this),(0,r.jsxDEV)(n.p,{children:[\"t2: \\uCCAB \\uBC88\\uC9F8 B \\uC751\\uB2F5 \\uB3C4\\uCC29 \\u2192 cache \\uC800\\uC7A5\",(0,r.jsxDEV)(n.br,{},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\"},this),`\n`,\"t3: \\uB450 \\uBC88\\uC9F8 B \\uC751\\uB2F5 \\uB3C4\\uCC29 \\u2192 cache \\uB36E\\uC5B4\\uC500\"]},void 0,!0,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:45,columnNumber:1},this)]},void 0,!0,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:31,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:\"1\\uBC88 \\uD638\\uCD9C\\uC5D0 \\uB300\\uD55C \\uC751\\uB2F5\\uAC12\\uC744 \\uAC00\\uC9C0\\uACE0 a,b\\uAC00 \\uAC01\\uAC01 \\uCCB4\\uC774\\uB2DD\\uACFC \\uB80C\\uB354\\uB9C1\\uC744 \\uD558\\uB294 \\uAD6C\\uC870\\uC774\\uC9C0\\uB9CC, \\uAC01 row\\uB9C8\\uB2E4 \\uAC19\\uC740 B / C / D / E key\\uAC00 \\uC5EC\\uB7EC \\uC140\\uC5D0\\uC11C \\uB3D9\\uC2DC\\uC5D0 \\uD544\\uC694\\uB85C \\uD558\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uB2E8\\uC21C\\uD788 \\uCE90\\uC2DC \\uC874\\uC7AC \\uC5EC\\uBD80\\uB9CC\\uC73C\\uB85C \\uD310\\uB2E8\\uD558\\uBA74 \\uC911\\uBCF5 \\uD638\\uCD9C\\uC774 \\uBC1C\\uC0DD\\uD558\\uAC8C \\uB41C\\uB2E4.\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:50,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:\"\\uCE90\\uC2F1 \\uC804 \\uC911\\uBCF5 \\uD638\\uCD9C\\uAE4C\\uC9C0 \\uC644\\uC804\\uD788 \\uB9C9\\uAE30 \\uC704\\uD574 in-flight Promise \\uCE90\\uC2DC(\\uC694\\uCCAD \\uC911 \\uCE90\\uC2DC)\\uB97C \\uCD94\\uAC00\\uD588\\uB2E4.\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:52,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.h2,{id:\"\\uBCF4\\uC644\",children:\"\\uBCF4\\uC644\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:54,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.hr,{},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:56,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:\"\\uC790\\uBC14\\uC2A4\\uD06C\\uB9BD\\uD2B8\\uC758 fetch\\uB294 Promise \\uAC1D\\uCCB4\\uB97C \\uBC18\\uD658\\uD55C\\uB2E4.\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:58,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:\"Promise \\uAC1D\\uCCB4\\uB294 \\uC678\\uBD80\\uC5D0 \\uB370\\uC774\\uD130\\uB97C \\uC694\\uCCAD\\uD558\\uACE0 \\uBC1B\\uB294 \\uC2DC\\uAC04\\uB3D9\\uC548 \\uB2E4\\uC74C \\uC791\\uC5C5\\uC744 \\uCC98\\uB9AC\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uD558\\uB294 \\uBE44\\uB3D9\\uAE30 \\uAC1D\\uCCB4\\uC774\\uB2E4.\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:60,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:\"\\uC2E4\\uC81C\\uB85C\\uB294 \\uAC12\\uC744 \\uAC00\\uC9C0\\uACE0 \\uC788\\uC9C0 \\uC54A\\uC544\\uB3C4 \\uB9C8\\uCE58 \\uAC12\\uC774 \\uC788\\uB294 \\uAC83\\uCC98\\uB7FC \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC774 \\uC810\\uC744 \\uC774\\uC6A9\\uD574\\uC11C \\uC694\\uCCAD \\uC911\\uC778 API \\uC911\\uBCF5 \\uD638\\uCD9C\\uD558\\uC9C0 \\uC54A\\uB3C4\\uB85D \\uB9C9\\uC544\\uC904 \\uC218 \\uC788\\uB2E4.\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:62,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.h3,{id:\"\\uBCF4\\uC644\\uB41C-\\uD750\\uB984\",children:\"\\uBCF4\\uC644\\uB41C \\uD750\\uB984\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:64,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.ol,{children:[`\n`,(0,r.jsxDEV)(n.li,{children:\"\\uC694\\uCCAD \\uBC1C\\uC0DD\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:66,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.li,{children:\"\\uCE90\\uC2DC\\uC5D0 \\uC788\\uC73C\\uBA74 \\uCE90\\uC2DC \\uBC18\\uD658\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:67,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.li,{children:\"\\uCE90\\uC2DC\\uC5D0 \\uC5C6\\uC73C\\uBA74 inflight \\uD655\\uC778 \\u2192 \\uC788\\uC73C\\uBA74 \\uADF8 Promise \\uBC18\\uD658\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:68,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.li,{children:\"\\uC5C6\\uC73C\\uBA74 \\uC0C8 \\uC694\\uCCAD \\uC0DD\\uC131, inflight\\uC5D0 \\uB4F1\\uB85D\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:69,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.li,{children:\"\\uC751\\uB2F5 \\uC624\\uBA74 \\uCE90\\uC2DC\\uC5D0 \\uC800\\uC7A5, inflight\\uC5D0\\uC11C \\uC81C\\uAC70\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:70,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:66,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.h3,{id:\"\\uCD5C\\uC885-\\uC801\\uC6A9\\uD55C-\\uCF54\\uB4DC\",children:\"\\uCD5C\\uC885 \\uC801\\uC6A9\\uD55C \\uCF54\\uB4DC\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:72,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.pre,{children:(0,r.jsxDEV)(n.code,{className:\"language-tsx\",children:`const cache = new Map<string, Data>();\nconst pending = new Map<string, Promise<Data>>();\n\nexport const fetchData = async (key: string, signal?: AbortSignal) => {\n  const cached = cache.get(key);\n  if (cached) return cached;\n\n  const inflight = pending.get(key);\n  if (inflight) return inflight;\n\n  const request = (async () => {\n    const res = await api.get(\\`/endpoint/\\${key}\\`, { signal });\n    const data = res.data;\n    cache.set(key, data);\n    return data;\n  })();\n\n  pending.set(key, request);\n  try {\n    return await request;\n  } finally {\n    pending.delete(key);\n  }\n};\n`},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:74,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:74,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:\"\\uC774\\uB807\\uAC8C \\uC911\\uBCF5 \\uC694\\uCCAD\\uAE4C\\uC9C0 \\uBC29\\uC9C0\\uD55C \\uD6C4, \\uD14C\\uC774\\uBE14\\uC758 \\uBAA8\\uB4E0 \\uC140\\uC774 \\uBE44\\uC2B7\\uD55C \\uC2DC\\uAC04 \\uB0B4\\uC5D0 \\uB80C\\uB354\\uB9C1\\uB418\\uB294 \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uC5C8\\uACE0, \\uAC1C\\uBC1C\\uC790 \\uB3C4\\uAD6C\\uB85C \\uD655\\uC778\\uD588\\uC744 \\uB54C API \\uC911\\uBCF5 \\uC694\\uCCAD\\uC774 \\uC0AC\\uB77C\\uC9C4 \\uAC83\\uB3C4 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uC5C8\\uB2E4.\"},void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:101,columnNumber:1},this)]},void 0,!0,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\",lineNumber:1,columnNumber:1},this)}function ae(o={}){let{wrapper:n}=o.components||{};return n?(0,r.jsxDEV)(n,Object.assign({},o,{children:(0,r.jsxDEV)(Y,o,void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\"},this)}),void 0,!1,{fileName:\"/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx\"},this):Y(o)}var fe=ae;function _e(o,n,c){throw new Error(\"Expected \"+(n?\"component\":\"object\")+\" `\"+o+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(c?\"\\nIt\\u2019s referenced in your code at `\"+c+\"` in `/Users/seul/project-macbook/slug/content/posts/_mdx_bundler_entry_point-b4191452-0fbc-4b6b-9d8e-c749e091f158.mdx`\":\"\"))}return de(pe);})();\n/*! Bundled license information:\n\nreact/cjs/react-jsx-dev-runtime.development.js:\n  (**\n   * @license React\n   * react-jsx-dev-runtime.development.js\n   *\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n*/\n;return Component;"
  },
  "_id": "posts/4.mdx",
  "_raw": {
    "sourceFilePath": "posts/4.mdx",
    "sourceFileName": "4.mdx",
    "sourceFileDir": "posts",
    "contentType": "mdx",
    "flattenedPath": "posts/4"
  },
  "type": "Post",
  "slug": "4",
  "headings": [
    {
      "level": 2,
      "title": "첫 번째 시도",
      "id": "첫-번째-시도"
    },
    {
      "level": 2,
      "title": "보완",
      "id": "보완"
    },
    {
      "level": 3,
      "title": "보완된 흐름",
      "id": "보완된-흐름"
    },
    {
      "level": 3,
      "title": "최종 적용한 코드",
      "id": "최종-적용한-코드"
    }
  ]
}