{
  "version": 3,
  "sources": ["../../../contentlayer.config.ts"],
  "sourcesContent": ["import { defineDocumentType, makeSource } from \"contentlayer/source-files\";\nimport remarkGfm from \"remark-gfm\";\nimport rehypeSlug from \"rehype-slug\";\nimport GithubSlugger from \"github-slugger\";\nimport removeMarkdown from \"remove-markdown\";\n\ntype Heading = {\n  level: number;\n  title: string;\n  id: string;\n};\n\nfunction extractHeadings(raw: string): Heading[] {\n  const slugger = new GithubSlugger();\n  slugger.reset();\n  const headings: Heading[] = [];\n  const headingRegex = /^(#{2,4})\\s+(.+)$/gm;\n  const stripEmoji = (text: string) =>\n    text.replace(/\\p{Extended_Pictographic}|\\uFE0F/gu, \"\");\n  let match: RegExpExecArray | null;\n\n  while ((match = headingRegex.exec(raw))) {\n    const hashes = match[1];\n    const rawText = match[2].replace(/#+$/, \"\").trim();\n    const cleanText = stripEmoji(removeMarkdown(rawText)).trim();\n    const safeText = cleanText || rawText;\n    headings.push({\n      level: hashes.length,\n      title: safeText,\n      id: safeText\n        ? slugger.slug(safeText)\n        : slugger.slug(`heading-${headings.length + 1}`),\n    });\n  }\n\n  return headings;\n}\n\nconst Post = defineDocumentType(() => ({\n  name: \"Post\",\n  filePathPattern: `posts/**/*.mdx`,\n  contentType: \"mdx\",\n  fields: {\n    title: { type: \"string\", required: true },\n    date: { type: \"date\", required: true },\n    tags: { type: \"list\", of: { type: \"string\" }, required: false },\n    summary: { type: \"string\", required: false },\n    giscusId: { type: \"string\", required: false },\n    category: { type: \"string\", required: true },\n  },\n  computedFields: {\n    slug: {\n      type: \"string\",\n      resolve: (post) => post._raw.flattenedPath.replace(/^posts\\//, \"\"),\n    },\n    headings: {\n      type: \"json\",\n      resolve: (post) => extractHeadings(post.body?.raw ?? \"\"),\n    },\n  },\n}));\n\nconst Log = defineDocumentType(() => ({\n  name: \"Log\",\n  filePathPattern: `logs/**/*.mdx`,\n  contentType: \"mdx\",\n  fields: {\n    title: { type: \"string\", required: true },\n    date: { type: \"date\", required: true },\n    tags: { type: \"list\", of: { type: \"string\" }, required: false },\n    summary: { type: \"string\", required: false },\n    giscusId: { type: \"string\", required: false },\n    cover: { type: \"string\", required: false },\n  },\n  computedFields: {\n    slug: {\n      type: \"string\",\n      resolve: (log) => log._raw.flattenedPath.replace(/^logs\\//, \"\"),\n    },\n    headings: {\n      type: \"json\",\n      resolve: (log) => extractHeadings(log.body?.raw ?? \"\"),\n    },\n  },\n}));\n\nexport default makeSource({\n  contentDirPath: \"content\",\n  documentTypes: [Post, Log],\n  mdx: {\n    rehypePlugins: [rehypeSlug],\n    remarkPlugins: [remarkGfm],\n  },\n});\n"],
  "mappings": ";AAAA,SAAS,oBAAoB,kBAAkB;AAC/C,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,oBAAoB;AAQ3B,SAAS,gBAAgB,KAAwB;AAC/C,QAAM,UAAU,IAAI,cAAc;AAClC,UAAQ,MAAM;AACd,QAAM,WAAsB,CAAC;AAC7B,QAAM,eAAe;AACrB,QAAM,aAAa,CAAC,SAClB,KAAK,QAAQ,sCAAsC,EAAE;AACvD,MAAI;AAEJ,SAAQ,QAAQ,aAAa,KAAK,GAAG,GAAI;AACvC,UAAM,SAAS,MAAM,CAAC;AACtB,UAAM,UAAU,MAAM,CAAC,EAAE,QAAQ,OAAO,EAAE,EAAE,KAAK;AACjD,UAAM,YAAY,WAAW,eAAe,OAAO,CAAC,EAAE,KAAK;AAC3D,UAAM,WAAW,aAAa;AAC9B,aAAS,KAAK;AAAA,MACZ,OAAO,OAAO;AAAA,MACd,OAAO;AAAA,MACP,IAAI,WACA,QAAQ,KAAK,QAAQ,IACrB,QAAQ,KAAK,WAAW,SAAS,SAAS,CAAC,EAAE;AAAA,IACnD,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAEA,IAAM,OAAO,mBAAmB,OAAO;AAAA,EACrC,MAAM;AAAA,EACN,iBAAiB;AAAA,EACjB,aAAa;AAAA,EACb,QAAQ;AAAA,IACN,OAAO,EAAE,MAAM,UAAU,UAAU,KAAK;AAAA,IACxC,MAAM,EAAE,MAAM,QAAQ,UAAU,KAAK;AAAA,IACrC,MAAM,EAAE,MAAM,QAAQ,IAAI,EAAE,MAAM,SAAS,GAAG,UAAU,MAAM;AAAA,IAC9D,SAAS,EAAE,MAAM,UAAU,UAAU,MAAM;AAAA,IAC3C,UAAU,EAAE,MAAM,UAAU,UAAU,MAAM;AAAA,IAC5C,UAAU,EAAE,MAAM,UAAU,UAAU,KAAK;AAAA,EAC7C;AAAA,EACA,gBAAgB;AAAA,IACd,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS,CAAC,SAAS,KAAK,KAAK,cAAc,QAAQ,YAAY,EAAE;AAAA,IACnE;AAAA,IACA,UAAU;AAAA,MACR,MAAM;AAAA,MACN,SAAS,CAAC,SAAS,gBAAgB,KAAK,MAAM,OAAO,EAAE;AAAA,IACzD;AAAA,EACF;AACF,EAAE;AAEF,IAAM,MAAM,mBAAmB,OAAO;AAAA,EACpC,MAAM;AAAA,EACN,iBAAiB;AAAA,EACjB,aAAa;AAAA,EACb,QAAQ;AAAA,IACN,OAAO,EAAE,MAAM,UAAU,UAAU,KAAK;AAAA,IACxC,MAAM,EAAE,MAAM,QAAQ,UAAU,KAAK;AAAA,IACrC,MAAM,EAAE,MAAM,QAAQ,IAAI,EAAE,MAAM,SAAS,GAAG,UAAU,MAAM;AAAA,IAC9D,SAAS,EAAE,MAAM,UAAU,UAAU,MAAM;AAAA,IAC3C,UAAU,EAAE,MAAM,UAAU,UAAU,MAAM;AAAA,IAC5C,OAAO,EAAE,MAAM,UAAU,UAAU,MAAM;AAAA,EAC3C;AAAA,EACA,gBAAgB;AAAA,IACd,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS,CAAC,QAAQ,IAAI,KAAK,cAAc,QAAQ,WAAW,EAAE;AAAA,IAChE;AAAA,IACA,UAAU;AAAA,MACR,MAAM;AAAA,MACN,SAAS,CAAC,QAAQ,gBAAgB,IAAI,MAAM,OAAO,EAAE;AAAA,IACvD;AAAA,EACF;AACF,EAAE;AAEF,IAAO,8BAAQ,WAAW;AAAA,EACxB,gBAAgB;AAAA,EAChB,eAAe,CAAC,MAAM,GAAG;AAAA,EACzB,KAAK;AAAA,IACH,eAAe,CAAC,UAAU;AAAA,IAC1B,eAAe,CAAC,SAAS;AAAA,EAC3B;AACF,CAAC;",
  "names": []
}
